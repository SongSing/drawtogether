(this.webpackJsonpwhiteboard=this.webpackJsonpwhiteboard||[]).push([[0],{13:function(t,e,i){t.exports=i(21)},18:function(t,e,i){},19:function(t,e,i){},20:function(t,e,i){},21:function(t,e,i){"use strict";i.r(e);var n=i(0),s=i.n(n),o=i(10),a=i.n(o),h=(i(18),i(7)),r=i(1),c=i(2),u=i(5),l=i(3),v=i(6),f=i(4);i(19);function d(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}var y=function(t){function e(t){var i;return Object(r.a)(this,e),(i=Object(u.a)(this,Object(l.a)(e).call(this,t))).state={server:"192.168.1.149:5000"},i.handleServerChange=i.handleServerChange.bind(Object(v.a)(i)),i}return Object(f.a)(e,t),Object(c.a)(e,[{key:"handleServerChange",value:function(t){this.setState(function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?d(i,!0).forEach((function(e){Object(h.a)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):d(i).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({},this.state,{server:t.target.value}))}},{key:"render",value:function(){var t=this;return s.a.createElement("div",{className:"page loginPage"},s.a.createElement("h1",null,"welcome,,,"),s.a.createElement("span",null,"Server: "),s.a.createElement("input",{type:"text",value:this.state.server,onChange:this.handleServerChange}),s.a.createElement("button",{onClick:function(){return t.props.onSubmit(t.state.server)}},"Join"))}}]),e}(s.a.Component);function m(t,e){var i=t.indexOf(e);return-1!==i?(t.splice(i,1),{item:e,index:i,existed:!0}):{item:e,index:-1,existed:!1}}var g=function(){function t(){var e=this;Object(r.a)(this,t),this.events=new Map;for(var i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];n.forEach((function(t){e.createEvent(t)}))}return Object(c.a)(t,[{key:"createEvent",value:function(t){this.events.has(t)||this.events.set(t,[])}},{key:"emitEvent",value:function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];this.events.has(t)||(console.warn("event not yet created: "+t),this.events.set(t,[])),this.events.get(t).forEach((function(t){return t.fn.apply(t,i)}))}},{key:"on",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"[unidentified]";this.events.has(t)||(console.warn("event not yet created: "+t),this.events.set(t,[])),this.events.get(t).push({fn:e,id:i})}},{key:"once",value:function(t,e){var i=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"[unidentified oneshot]";this.events.has(t)||(console.warn("event not yet created: "+t),this.events.set(t,[]));var s={fn:function(){e.apply(void 0,arguments),m(i.events.get(t),s)},id:n};this.events.get(t).push(s)}},{key:"debugEvent",value:function(t){this.events.has(t)||(console.warn("event not yet created: "+t),this.events.set(t,[])),console.log("ids registered to event `"+t+"`:"),this.events.get(t).forEach((function(t){return console.log(t.id)}))}}]),t}(),p=(new g,function(t){function e(){var t;return Object(r.a)(this,e),(t=Object(u.a)(this,Object(l.a)(e).call(this,"data","close","binary"))).socket=null,t}return Object(f.a)(e,t),Object(c.a)(e,[{key:"connect",value:function(t){var e=this;this.socket=new WebSocket("ws://"+t),this.socket.addEventListener("message",(function(t){if("string"===typeof t.data){var i=JSON.parse(t.data);e.emitEvent("data",i.command,i.data)}else e.emitEvent("data","binary",t.data)})),this.socket.addEventListener("close",(function(){e.emitEvent("close")})),this.socket.addEventListener("error",(function(){e.emitEvent("close")}))}},{key:"write",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.socket){var i={command:t,data:e};this.socket.send(JSON.stringify(i))}}}]),e}(g)),w=(i(20),i(11)),b=i(12),k=function(){function t(e,i){Object(r.a)(this,t),this.x=void 0,this.y=void 0,void 0===e?(this.x=0,this.y=0):void 0===i?(this.x=e,this.y=e):(this.x=e,this.y=i)}return Object(c.a)(t,[{key:"reverseByX",value:function(t){var e=this.unitX.inverted.times(t);this.x=e.x,this.y=e.y}},{key:"reverseByY",value:function(t){var e=this.unitY.inverted.times(t);this.x=e.x,this.y=e.y}},{key:"equals",value:function(t){return this.x===t.x&&this.y===t.y}},{key:"copy",value:function(){return new t(this.x,this.y)}},{key:"round",value:function(){this.x=Math.round(this.x),this.y=Math.round(this.y)}},{key:"times",value:function(t){var e=this.copy();return e.multiply(t),e}},{key:"multiply",value:function(e){e instanceof t?(this.x*=e.x,this.y*=e.y):(this.x*=e,this.y*=e)}},{key:"dividedBy",value:function(t){var e=this.copy();return e.divideBy(t),e}},{key:"divideBy",value:function(e){e instanceof t?(this.x/=e.x,this.y/=e.y):(this.x/=e,this.y/=e)}},{key:"plus",value:function(t){var e=this.copy();return e.add(t),e}},{key:"add",value:function(e){e instanceof t?(this.x+=e.x,this.y+=e.y):(this.x+=e,this.y+=e)}},{key:"minus",value:function(t){var e=this.copy();return e.subtract(t),e}},{key:"subtract",value:function(e){e instanceof t?(this.x-=e.x,this.y-=e.y):(this.x-=e,this.y-=e)}},{key:"distanceTo",value:function(t){return Math.sqrt(this.minus(t).squared.sum)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+")"}},{key:"toArray",value:function(){return[this.x,this.y]}},{key:"xOnly",get:function(){return new t(this.x,0)}},{key:"yOnly",get:function(){return new t(0,this.y)}},{key:"unitX",get:function(){return new t(this.x>0?1:-1,this.y/this.x)}},{key:"unitY",get:function(){return new t(this.x/this.y,this.y>0?1:-1)}},{key:"inverted",get:function(){return this.times(-1)}},{key:"rounded",get:function(){return new t(Math.round(this.x),Math.round(this.y))}},{key:"squared",get:function(){return this.times(this)}},{key:"sum",get:function(){return this.x+this.y}},{key:"abs",get:function(){return new t(Math.abs(this.x),Math.abs(this.y))}},{key:"min",get:function(){return Math.min(this.x,this.y)}},{key:"max",get:function(){return Math.max(this.x,this.y)}}],[{key:"fromSizeLike",value:function(e){return new t(e.width,e.height)}},{key:"fromPointLike",value:function(e){return new t(e.x,e.y)}},{key:"fromArray",value:function(e){return Object(w.a)(t,Object(b.a)(e))}},{key:"fromIndex",value:function(e,i){return new t(e%i,~~(e/i))}}]),t}(),x=function(){function t(e,i){Object(r.a)(this,t),this.position=void 0,this.size=void 0,this.position=e,this.size=i}return Object(c.a)(t,[{key:"plus",value:function(e){return new t(this.position.plus(e.position),this.size.plus(e.size))}},{key:"times",value:function(e){return"number"===typeof e?new t(this.position.times(e),this.size.times(e)):new t(this.position.times(e.position),this.size.times(e.size))}},{key:"translated",value:function(e){return new t(this.position.plus(e),this.size.copy())}},{key:"toString",value:function(){return"("+this.x+", "+this.y+", "+this.width+", "+this.height+")"}},{key:"fitInside",value:function(t,e){var i=t.aspectRatio,n=this.getPointFromAnchor(e).copy();i>this.aspectRatio?(this.width*=t.height/this.height,this.height=t.height):(this.height*=t.width/this.width,this.width=t.width),this.setPointFromAnchor(e,n)}},{key:"setWidthKeepAR",value:function(t){var e=this.width/t;this.width=t,this.height=this.height/e}},{key:"setHeightKeepAR",value:function(t){var e=this.height/t;this.height=t,this.width=this.width/e}},{key:"expandToward",value:function(t,e){switch(t){case"ne":var i=this.bottomLeft;this.size.multiply(e),this.bottomLeft=i;break;case"nw":var n=this.bottomRight;this.size.multiply(e),this.bottomRight=n;break;case"se":var s=this.topLeft;this.size.multiply(e),this.topLeft=s;break;case"sw":var o=this.topRight;this.size.multiply(e),this.topRight=o}}},{key:"fitInsideGreedyCenter",value:function(t,e){var i=t.aspectRatio,n=this.center.copy();i>1?(this.height*=t.width/this.width,this.width=t.width):(this.width*=t.height/this.height,this.height=t.height),this.center=n,e.containsRect(this)||(this.right>e.right&&(this.setWidthKeepAR(2*(e.right-n.x)),this.center=n),this.bottom>e.bottom&&(this.setHeightKeepAR(2*(e.bottom-n.y)),this.center=n),this.left<e.left&&(this.setWidthKeepAR(2*(n.x-e.left)),this.center=n),this.top<e.top&&(this.setHeightKeepAR(2*(n.y-e.top)),this.center=n))}},{key:"fitInsideGreedy",value:function(t,e,i){var n=t.aspectRatio,s=this.getPointFromAnchor(e).copy();n>1?(this.height*=t.width/this.width,this.width=t.width):(this.width*=t.height/this.height,this.height=t.height),this.setPointFromAnchor(e,s),i.containsRect(this)||(this.right>i.right&&(this.setWidthKeepAR(i.right-this.left),this.setPointFromAnchor(e,s)),this.bottom>i.bottom&&(this.setHeightKeepAR(i.bottom-this.top),this.setPointFromAnchor(e,s)),this.left<i.left&&(this.setWidthKeepAR(this.right-i.left),this.setPointFromAnchor(e,s)),this.top<i.top&&(this.setHeightKeepAR(this.bottom-i.top),this.setPointFromAnchor(e,s)))}},{key:"copy",value:function(){return new t(this.position.copy(),this.size.copy())}},{key:"mirror",value:function(t){this.position=t.position,this.size=t.size}},{key:"getPointFromAnchor",value:function(t){switch(t){case"nw":return this.topLeft;case"ne":return this.topRight;case"sw":return this.bottomLeft;case"se":return this.bottomRight}}},{key:"setPointFromAnchor",value:function(t,e){switch(t){case"nw":this.topLeft=e;break;case"ne":this.topRight=e;break;case"sw":this.bottomLeft=e;break;case"se":this.bottomRight=e}}},{key:"round",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(t){var e=this.center;this.size.round(),this.center=e.rounded}else this.position.round(),this.size.round()}},{key:"containsPoint",value:function(t){return t.x>=this.x&&t.x<=this.right&&t.y>=this.y&&t.y<=this.bottom}},{key:"containsRect",value:function(t){return this.containsPoint(t.topLeft)&&this.containsPoint(t.bottomRight)}},{key:"intersects",value:function(t){return!(t.left>=this.right||t.right<=this.left||t.top>=this.bottom||t.bottom<=this.top)}},{key:"overlapPercentage",value:function(t){var e=this.overlapArea(t);return e/(this.area+t.area-e)}},{key:"overlapArea",value:function(t){var e=Math.max(this.left,t.left),i=Math.max(this.top,t.top),n=Math.min(this.bottom,t.bottom);return(Math.min(this.right,t.right)-e)*(n-i)}},{key:"isSquare",get:function(){return this.width===this.height}},{key:"aspectRatio",get:function(){return this.width/this.height}},{key:"rounded",get:function(){return new t(this.position.rounded,this.size.rounded)}},{key:"local",get:function(){return new t(new k(0),this.size.copy())}},{key:"x",get:function(){return this.position.x},set:function(t){this.position.x=t}},{key:"y",get:function(){return this.position.y},set:function(t){this.position.y=t}},{key:"left",get:function(){return this.position.x},set:function(t){this.position.x=t}},{key:"top",get:function(){return this.position.y},set:function(t){this.position.y=t}},{key:"width",get:function(){return this.size.x},set:function(t){this.size.x=t}},{key:"height",get:function(){return this.size.y},set:function(t){this.size.y=t}},{key:"right",get:function(){return this.x+this.width},set:function(t){this.x=t-this.width}},{key:"bottom",get:function(){return this.y+this.height},set:function(t){this.y=t-this.height}},{key:"topLeft",get:function(){return this.position},set:function(t){this.position=t}},{key:"topRight",get:function(){return this.position.plus(new k(this.width,0))},set:function(t){this.position=t.minus(new k(this.width,0))}},{key:"bottomLeft",get:function(){return this.position.plus(new k(0,this.height))},set:function(t){this.position=t.minus(new k(0,this.height))}},{key:"bottomRight",get:function(){return this.position.plus(this.size)},set:function(t){this.position=t.minus(this.size)}},{key:"center",get:function(){return this.position.plus(this.size.times(.5))},set:function(t){this.position=t.minus(this.size.times(.5))}},{key:"cx",get:function(){return this.center.x},set:function(t){this.position.x=t-this.size.x/2}},{key:"cy",get:function(){return this.center.y},set:function(t){this.position.y=t-this.size.y/2}},{key:"area",get:function(){return this.size.x*this.size.y}}],[{key:"anchorOpposite",value:function(t){switch(t){case"nw":return"se";case"ne":return"sw";case"sw":return"ne";case"se":return"nw"}}},{key:"between",value:function(e,i){return new t(new k(Math.min(e.x,i.x),Math.min(e.y,i.y)),new k(Math.abs(e.x-i.x),Math.abs(e.y-i.y)))}}]),t}(),O=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(r.a)(this,t),this.canvas=void 0,this.translation=void 0,this.align=void 0,this.usingDeepCalc=void 0,this.mouse=void 0,this.offset=new k(0),this.context=void 0,(e=e||{}).canvasElement?"string"===typeof e.canvasElement&&(e.canvasElement=document.querySelector(e.canvasElement)||void 0):e.canvasElement=document.createElement("canvas"),this.canvas=e.canvasElement,this.context=this.canvas.getContext("2d",{alpha:!e.opaque}),e.size&&this.resize(e.size,!1),this.translation=new k(0),this.align={horizontal:e.align&&e.align.horizontal||!1,vertical:e.align&&e.align.vertical||!1},this.align.horizontal||this.align.vertical||(this.canvas.style.transformOrigin="top left"),this.usingDeepCalc=e.deepCalc||!1,this.pixelated=e.pixelated||!1,this.usingDeepCalc&&(this.deepCalcPosition(),window.addEventListener("resize",this.deepCalcPosition)),this.mouse={isDown:!1,lastPos:null,originalPos:new k(-1),events:{move:[],down:[],up:[],leave:[]}},this.canvas.addEventListener("mousemove",this.mouseMove.bind(this)),this.canvas.addEventListener("touchmove",this.mouseMove.bind(this)),this.canvas.addEventListener("mousedown",this.mouseDown.bind(this)),this.canvas.addEventListener("touchstart",this.mouseDown.bind(this)),this.canvas.addEventListener("mouseup",this.mouseUp.bind(this)),this.canvas.addEventListener("touchend",this.mouseUp.bind(this)),this.canvas.addEventListener("mouseleave",this.mouseLeave.bind(this)),this.canvas.addEventListener("touchcancel",this.mouseLeave.bind(this))}return Object(c.a)(t,[{key:"addEventListener",value:function(t,e){-1!==["mouseup","mousedown","mousemove","mouseleave"].indexOf(t)&&this.mouse.events[t.substr(5)].push(e)}},{key:"resize",value:function(t,e){var i=null;e&&(i=this.canvas.cloneNode()),this.canvas.width=t.x,this.canvas.height=t.y,e&&this.drawImage(i,new k(0))}},{key:"zoom",value:function(t){var e,i;"number"===typeof t?(e=t,i=t):(e=t.x,i=t.y),this.canvas.style.transform="scale("+e+", "+i+")"}},{key:"zoomToFit",value:function(t){var e=t.x/this.width,i=t.y/this.height;e<i?this.zoom(e):this.zoom(i)}},{key:"scale",value:function(t){return this.zoom(t)}},{key:"clear",value:function(){this.context.clearRect(-this.translation.x,-this.translation.y,this.canvas.width,this.canvas.height)}},{key:"deepCalcPosition",value:function(){for(var t,e=this.canvas,i=0,n=0;e&&!isNaN(e.offsetLeft)&&!isNaN(e.offsetTop);)t=window.getComputedStyle(e,null),i+=e.offsetLeft-e.scrollLeft+(t?parseInt(t.getPropertyValue("border-left-width"),10):0),n+=e.offsetTop-e.scrollTop+(t?parseInt(t.getPropertyValue("border-top-width"),10):0),e=e.offsetParent;this.offset=new k(i,n)}},{key:"posFromEvent",value:function(t){var e=new k;e=t instanceof MouseEvent?new k(t.clientX,t.clientY):new k(t.changedTouches[0].clientX,t.changedTouches[0].clientY),this.usingDeepCalc&&this.deepCalcPosition();var i=this.canvas.getBoundingClientRect(),n=this.usingDeepCalc?this.offset.copy():new k(i.left,i.top);return this.align.horizontal&&n.x>0&&(n.x=(2*n.x-i.width)/2),this.align.vertical&&n.y>0&&(n.y=(2*n.y-i.height)/2),e.subtract(n),e.multiply(this.size.dividedBy(new k(i.width,i.height))),e}},{key:"mouseMove",value:function(t){var e=this,i=this.posFromEvent(t);this.mouse.lastPos||(this.mouse.lastPos=i),this.mouse.isDown||(this.mouse.originalPos=i),this.mouse.events.move.forEach((function(n){!1!==n.call(e,i,e.mouse.isDown,e.mouse.lastPos,e.mouse.originalPos,t)&&(e.mouse.lastPos=i)}))}},{key:"mouseDown",value:function(t){var e=this,i=this.posFromEvent(t);this.mouse.isDown=!0,this.mouse.lastPos=i,this.mouse.originalPos=i,this.mouse.events.down.forEach((function(n){n.call(e,i,t)}))}},{key:"mouseUp",value:function(t){var e=this,i=this.posFromEvent(t);this.mouse.isDown=!1,this.mouse.events.up.forEach((function(n){n.call(e,i,e.mouse.originalPos,t)})),this.mouse.lastPos=i}},{key:"mouseLeave",value:function(t){var e=this,i=this.posFromEvent(t);this.mouse.events.leave.forEach((function(n){n.call(e,i,t)}))}},{key:"createBlob",value:function(t,e){this.canvas.toBlob((function(e){t(e)}),e)}},{key:"createImage",value:function(t,e){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.canvas.toBlob((function(e){var n=new Image;n.onload=function(){t(n),n.onload=null,i&&URL.revokeObjectURL(n.src)};var s=URL.createObjectURL(e);n.src=s}),e)}},{key:"drawImage",value:function(e,i){e instanceof t&&(e=e.canvas),i instanceof k?this.context.drawImage(e,i.x,i.y):this.context.drawImage(e,i.x,i.y,i.width,i.height)}},{key:"drawCroppedImage",value:function(e,i,n){e instanceof t&&(e=e.canvas),i instanceof k?this.context.drawImage(e,n.x,n.y,n.width,n.height,i.x,i.y,n.width,n.height):this.context.drawImage(e,n.x,n.y,n.width,n.height,i.x,i.y,i.width,i.height)}},{key:"drawRotatedCroppedImage",value:function(e,i,n,s,o){e instanceof t&&(e=e.canvas);var a=this.context;a.save(),a.translate(s.x+n.x,s.y+n.y),a.rotate(i),s instanceof k?a.drawImage(e,o.x,o.y,o.width,o.height,-n.x,-n.y,e.width,e.height):a.drawImage(e,o.x,o.y,o.width,o.height,-n.x,-n.y,s.width,s.height),a.restore()}},{key:"fillWithImage",value:function(t,e){e&&this.resize(new k(t.width,t.height),!1),this.drawImage(t,new k(0))}},{key:"drawLine",value:function(t,e,i,n){i&&(this.color=i),n&&(this.lineWidth=n),this.context.beginPath(),this.context.moveTo(t.x,t.y),this.context.lineTo(e.x,e.y),this.context.stroke()}},{key:"drawRect",value:function(t,e,i){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];this.color=e,this.lineWidth=i,n&&(t=t.translated(new k(.5))),this.context.strokeRect(t.x,t.y,t.width,t.height)}},{key:"fillRect",value:function(t,e){this.color=e,this.context.fillRect(t.x,t.y,t.width,t.height)}},{key:"drawRoundedRect",value:function(t,e,i,n){var s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];this.color=i,this.lineWidth=n,s&&(t=t.translated(new k(.5))),t.width<2*e&&(e=t.width/2),t.height<2*e&&(e=t.height/2),this.context.beginPath(),this.context.moveTo(t.x+e,t.y),this.context.arcTo(t.right,t.y,t.right,t.bottom,e),this.context.arcTo(t.right,t.bottom,t.x,t.bottom,e),this.context.arcTo(t.x,t.bottom,t.x,t.y,e),this.context.arcTo(t.x,t.y,t.right,t.y,e),this.context.closePath(),this.context.stroke()}},{key:"fillRoundedRect",value:function(t,e,i){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];this.color=i,n&&(t=t.translated(new k(.5))),t.width<2*e&&(e=t.width/2),t.height<2*e&&(e=t.height/2),this.context.beginPath(),this.context.moveTo(t.x+e,t.y),this.context.arcTo(t.right,t.y,t.right,t.bottom,e),this.context.arcTo(t.right,t.bottom,t.x,t.bottom,e),this.context.arcTo(t.x,t.bottom,t.x,t.y,e),this.context.arcTo(t.x,t.y,t.right,t.y,e),this.context.closePath(),this.context.fill()}},{key:"fill",value:function(t){this.fillRect(new x(new k(0),this.size),t)}},{key:"fillText",value:function(t,e,i,n,s,o){this.color=i,o&&(this.font=o),n&&(this.context.textBaseline=n),s&&(this.context.textAlign=s),this.context.fillText(t,e.x,e.y)}},{key:"fillCircle",value:function(t,e,i){this.color=i,this.context.beginPath(),this.context.arc(t.x,t.y,e,0,2*Math.PI,!1),this.context.fill()}},{key:"fillCircleInSquare",value:function(t,e,i){this.color=i,this.context.beginPath(),this.context.arc(t.x+e/2,t.y+e/2,e/2,0,2*Math.PI,!1),this.context.fill()}},{key:"drawCircleInSquare",value:function(t,e,i,n){this.color=i,this.lineWidth=n,this.context.beginPath(),this.context.arc(t.x+e/2,t.y+e/2,e/2,0,2*Math.PI,!1),this.context.stroke()}},{key:"fillCircleInRect",value:function(t,e){if(t.isSquare)return this.fillCircleInSquare(t.position,t.width,e);this.color=e,this.context.beginPath(),this.context.ellipse(t.x,t.y,t.width/2,t.height/2,0,0,2*Math.PI),this.context.fill()}},{key:"drawCircleInRect",value:function(t,e,i){if(t.isSquare)return this.drawCircleInSquare(t.position,t.width,e,i);this.color=e,this.lineWidth=i,this.context.beginPath(),this.context.ellipse(t.x,t.y,t.width/2,t.height/2,0,0,2*Math.PI),this.context.stroke()}},{key:"drawRotatedImage",value:function(e,i,n){var s,o;e instanceof t&&(e=e.canvas),n instanceof k?(s=e.width,o=e.height):(s=n.width,o=n.height),this.context.save(),this.context.translate(n.x+s/2,n.y+o/2),this.context.rotate(i),this.context.drawImage(e,-s/2,-o/2,s,o),this.context.restore()}},{key:"size",get:function(){return new k(this.canvas.width,this.canvas.height)}},{key:"pixelated",set:function(t){var e=this;t=!t;var i=this.context;if(i.mozImageSmoothingEnabled=t,i.webkitImageSmoothingEnabled=t,i.imageSmoothingEnabled=t,t)this.canvas.style.imageRendering="";else{["optimizeSpeed","crisp-edges","-moz-crisp-edges","-webkit-optimize-contrast","optimize-contrast","pixelated"].forEach((function(t){return e.canvas.style.imageRendering=t}))}}},{key:"width",get:function(){return this.canvas.width}},{key:"height",get:function(){return this.canvas.height}},{key:"opacity",get:function(){return this.context.globalAlpha},set:function(t){this.context.globalAlpha=t}},{key:"color",get:function(){return this.context.fillStyle},set:function(t){void 0!==t&&(this.context.fillStyle=t,this.context.strokeStyle=t)}},{key:"font",get:function(){return this.context.font},set:function(t){void 0!==t&&(this.context.font=t)}},{key:"lineWidth",get:function(){return this.context.lineWidth},set:function(t){void 0!==t&&(this.context.lineWidth=t)}},{key:"blendMode",get:function(){return this.context.globalCompositeOperation},set:function(t){this.context.globalCompositeOperation=t}},{key:"lineDash",get:function(){return this.context.getLineDash()},set:function(t){this.context.setLineDash(t)}},{key:"imageData",get:function(){return this.context.getImageData(0,0,this.width,this.height)}}],[{key:"fileToImage",value:function(t,e){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=new Image;n.onload=function(){e(n),i&&window.URL.revokeObjectURL(n.src)},n.src=window.URL.createObjectURL(t)}}]),t}();HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(t,e,i){var n=this;setTimeout((function(){for(var s=atob(n.toDataURL(e,i).split(",")[1]),o=s.length,a=new Uint8Array(o),h=0;h<o;h++)a[h]=s.charCodeAt(h);t(new Blob([a],{type:e||"image/png"}))}))}});var j=function(t){function e(){return Object(r.a)(this,e),Object(u.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(f.a)(e,t),Object(c.a)(e,[{key:"componentDidMount",value:function(){}},{key:"handleChange",value:function(t){this.props.onChange(t.target.value)}},{key:"render",value:function(){return s.a.createElement("div",{className:"item"},s.a.createElement("label",null,s.a.createElement("div",{className:"fullSize",style:{backgroundColor:this.props.color}}),s.a.createElement("input",{type:"color",style:{display:"none"},onChange:this.handleChange.bind(this),value:this.props.color})))}}]),e}(s.a.Component),E=function(t){function e(){return Object(r.a)(this,e),Object(u.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(f.a)(e,t),Object(c.a)(e,[{key:"componentDidMount",value:function(){}},{key:"handleIncrement",value:function(){this.props.onIncrement()}},{key:"handleDecrement",value:function(){this.props.onDecrement()}},{key:"handleChange",value:function(t){this.props.onChange(t.target.value)}},{key:"render",value:function(){return s.a.createElement("div",{className:"item"},s.a.createElement("button",{className:"fullSize",onClick:this.handleIncrement.bind(this)},"+"),s.a.createElement("input",{value:this.props.size.toString(),onChange:this.handleChange.bind(this)}),s.a.createElement("button",{className:"fullSize",onClick:this.handleDecrement.bind(this)},"-"))}}]),e}(s.a.Component),z=function(t){function e(){return Object(r.a)(this,e),Object(u.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(f.a)(e,t),Object(c.a)(e,[{key:"handleClick",value:function(){this.props.onToggle()}},{key:"render",value:function(){var t=this.props.tool+".png";return s.a.createElement("button",{className:"item fullSize",style:{backgroundImage:"url("+t+")"},onClick:this.handleClick.bind(this)})}}]),e}(s.a.Component);function P(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function C(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?P(i,!0).forEach((function(e){Object(h.a)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):P(i).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var R=function(t){function e(){var t,i;Object(r.a)(this,e);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(i=Object(u.a)(this,(t=Object(l.a)(e)).call.apply(t,[this].concat(s)))).state={color:"black",size:5,tool:"pencil"},i.lastWrite=0,i.writeThrottle=16,i._canvas=null,i}return Object(f.a)(e,t),Object(c.a)(e,[{key:"mouseDown",value:function(t){if("pencil"===this.state.tool){var e={pos:t.toArray(),size:this.state.size,color:this.state.color};D.write("dot",e)}}},{key:"mouseMove",value:function(t,e,i){if(i){var n=Date.now();switch(this.lastWrite=n,this.state.tool){case"pencil":var s={from:e.toArray(),to:t.toArray(),size:this.state.size,color:this.state.color};D.write("line",s);break;case"eraser":var o={from:e.toArray(),to:t.toArray(),size:this.state.size};D.write("erase",o)}}}},{key:"mouseUp",value:function(){}},{key:"handleData",value:function(t,e){var i=this;switch(t){case"line":var n=e;this.canvas.drawLine(k.fromArray(n.from),k.fromArray(n.to),n.color,n.size);break;case"dot":var s=e;this.canvas.fillCircleInSquare(k.fromArray(s.pos).minus(new k(s.size/2)),s.size,s.color);break;case"erase":var o=e;this.canvas.drawLine(k.fromArray(o.from),k.fromArray(o.to),"white",o.size);break;case"binary":var a=new Blob([e]),h=new Image;h.onload=function(){i.canvas.drawImage(h,new k(0)),URL.revokeObjectURL(h.src)},h.src=URL.createObjectURL(a);break;case"clear":this.canvas.fill("white")}}},{key:"componentDidMount",value:function(){var t=this;D.on("data",this.handleData.bind(this)),this.refs.canvas.addEventListener("touchstart",(function(t){t.preventDefault()}),{passive:!1}),this.refs.canvas.addEventListener("touchmove",(function(t){t.preventDefault()}),{passive:!1}),this.refs.canvas.addEventListener("touchend",(function(t){t.preventDefault()}),{passive:!1}),this._canvas=new O({canvasElement:this.refs.canvas,pixelated:!1,opaque:!0,size:k.fromArray(this.props.size)}),this.canvas.context.lineJoin="round",this.canvas.context.lineCap="round",this.canvas.addEventListener("mousedown",(function(e,i){t.mouseDown(e)})),this.canvas.addEventListener("mousemove",(function(e,i,n){t.mouseMove(e,n,i)})),this.canvas.addEventListener("mouseup",(function(){t.mouseUp()})),this.canvas.fill("white")}},{key:"handleColorChange",value:function(t){this.setState(C({},this.state,{color:t}))}},{key:"handleIncrement",value:function(){this.setState(C({},this.state,{size:Math.min(100,this.state.size+1)}))}},{key:"handleDecrement",value:function(){this.setState(C({},this.state,{size:Math.max(0,this.state.size-1)}))}},{key:"handleChange",value:function(t){var e;e=""===t?0:parseInt(t),isNaN(e)||(e=Math.min(100,Math.max(0,e)),this.setState(C({},this.state,{size:e})))}},{key:"handleToggleTool",value:function(){"eraser"===this.state.tool?this.setState(C({},this.state,{tool:"pencil"})):this.setState(C({},this.state,{tool:"eraser"}))}},{key:"saveBoard",value:function(){var t=document.createElement("a");t.download="board.png",t.href=this.canvas.canvas.toDataURL(),t.click()}},{key:"clearBoard",value:function(){D.write("clear")}},{key:"render",value:function(){return s.a.createElement("div",{className:"page"},s.a.createElement("div",{className:"menu"},s.a.createElement(j,{color:this.state.color,onChange:this.handleColorChange.bind(this)}),s.a.createElement(E,{size:this.state.size,onIncrement:this.handleIncrement.bind(this),onDecrement:this.handleDecrement.bind(this),onChange:this.handleChange.bind(this)}),s.a.createElement(z,{tool:this.state.tool,onToggle:this.handleToggleTool.bind(this)}),s.a.createElement("button",{className:"item fullSize",onClick:this.saveBoard.bind(this)},"\ud83d\udcbe"),s.a.createElement("button",{className:"item fullSize",onClick:this.clearBoard.bind(this)},"\u239a")),s.a.createElement("canvas",{ref:"canvas",width:800,height:600}))}},{key:"canvas",get:function(){return this._canvas}}]),e}(s.a.Component);function L(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function S(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?L(i,!0).forEach((function(e){Object(h.a)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):L(i).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var D=new p,I=function(t){function e(t){var i;return Object(r.a)(this,e),(i=Object(u.a)(this,Object(l.a)(e).call(this,t))).state={connected:!1,size:[]},D.on("data",i.handleData.bind(Object(v.a)(i))),D.on("close",i.handleClose.bind(Object(v.a)(i))),i}return Object(f.a)(e,t),Object(c.a)(e,[{key:"handleClose",value:function(){this.setState(S({},this.state,{connected:!1}))}},{key:"handleData",value:function(t,e){switch(t){case"hi":D.write("join");break;case"join":console.log("successfully joined the server!"),this.setState(S({},this.state,{connected:!0,size:e.size}))}}},{key:"handleSubmit",value:function(t){console.log("connecting to server: "+t),D.connect(t)}},{key:"render",value:function(){var t=this.state.connected?s.a.createElement(R,{size:this.state.size}):s.a.createElement(y,{onSubmit:this.handleSubmit});return s.a.createElement("div",{className:"App"},t)}}]),e}(s.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.a.render(s.a.createElement(I,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))}},[[13,1,2]]]);
//# sourceMappingURL=main.82c5efc4.chunk.js.map